package domain_test

import (
	"drdgvhbh/discordbot/internal/user/domain"
	"drdgvhbh/discordbot/internal/user/entity"
	"fmt"
	"testing"

	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/suite"
)

type errorMessage struct {
	suite.Suite
}

func (errorMessage *errorMessage) TestExplainsWhichUserHasBeenAlreadyInserted() {
	assert := assert.New(errorMessage.T())

	id := "1234"
	user := entity.CreateUser(id, 0)
	duplicateUserInsertionError := domain.CreateDuplicateUserInsertionError(user)
	assert.Equal(
		duplicateUserInsertionError.Error(),
		fmt.Sprintf("User %s has already been inserted", id))
}

func TestErrorMessageSuite(t *testing.T) {
	suite.Run(t, new(errorMessage))
}
